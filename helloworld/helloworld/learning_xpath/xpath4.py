from scrapy.selector import Selector
from enum import Enum, unique
from marshmallow import Schema, fields


@unique
class FieldType(Enum):
    Text = 0  # <p></p>
    h1 = 1  # <h1></h1>                             #
    h2 = 2  # <h2></h2>                             ##
    h3 = 3  # <h3></h3>                             ###
    h4 = 4  # <h4></h4>                             ####
    h5 = 5  # <h5></h5>                             #####
    h6 = 6  # <h6></h6>                             ######
    pre = 7  # <pre></pre>                          ``` ```
    blockquote = 8  # <blockquote></blockquote>     >
    figure = 9  # <figure></figure>
    ul = 10  # <ul></ul>  ul > li                   *


class BlogContent:

    def __init__(self, blog_content_type, blog_content_value):
        self.blog_content_type = blog_content_type
        self.blog_content_value = blog_content_value


class BlogContentSchema(Schema):
    blog_content_type = fields.Str()
    blog_content_value = fields.Str()


class BlogPost:

    def __init__(self, title, subtitle, date, author, tags, categories, author_link_from, blog_content_items=None):
        self.title = title
        self.subtitle = subtitle
        self.date = date
        self.author = author
        self.tags = tags
        self.categories = categories
        self.author_link_from = author_link_from
        self.blog_content_items = blog_content_items


class BlogPostSchema(Schema):
    title = fields.Str()
    subtitle = fields.Str()
    date = fields.Str()
    author = fields.Str()
    tags = fields.List(fields.Str())
    categories = fields.Str()
    author_link_from = fields.Str()
    blog_content_items = fields.List(fields.Nested(BlogContentSchema, ref='BlogContentSchema'))



body = """
<html>
   <head>
      <title>Scrapy Tutorial By Cookie</title>
   </head>
   <body>
      <div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="5847" id="5847" class="graf graf--figure graf--leading"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 328px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.9%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*qmHZVxZmPP9w5iMqN7GWMw.jpeg" data-width="1280" data-height="600" data-action="zoom" data-action-value="1*qmHZVxZmPP9w5iMqN7GWMw.jpeg" data-scroll="native"><img src="https://cdn-images-1.medium.com/freeze/max/30/1*qmHZVxZmPP9w5iMqN7GWMw.jpeg?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="35"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*qmHZVxZmPP9w5iMqN7GWMw.jpeg" src="https://cdn-images-1.medium.com/max/800/1*qmHZVxZmPP9w5iMqN7GWMw.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*qmHZVxZmPP9w5iMqN7GWMw.jpeg"></noscript></div></div></figure><h1 name="5d98" id="5d98" class="graf graf--h3 graf-after--figure graf--title">sync.RWMutex</h1><h2 name="e79d" id="e79d" class="graf graf--h4 graf-after--h3 graf--subtitle">Solving readers-writers problems</h2><div class="uiScale uiScale-ui--regular uiScale-caption--regular u-flexCenter u-marginVertical24 u-fontSize15 js-postMetaLockup"><div class="u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@mlowicki?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="5b90d60d16b7" data-action-type="hover" data-user-id="5b90d60d16b7" dir="auto"><img src="https://cdn-images-1.medium.com/fit/c/50/50/1*3fQyAyN3cY_zYqT2FDWFig.jpeg" class="avatar-image u-size50x50" alt="Go to the profile of Michał Łowicki"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><div class="u-paddingBottom3"><a class="ds-link ds-link--styleSubtle ui-captionStrong u-inlineBlock link link--darken link--darker" href="https://medium.com/@mlowicki" data-action="show-user-card" data-action-value="5b90d60d16b7" data-action-type="hover" data-user-id="5b90d60d16b7" dir="auto">Michał Łowicki</a><span class="followState js-followState" data-user-id="5b90d60d16b7"><button class="button button--smallest u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton u-marginLeft10 u-xs-hide" data-action="sign-up-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-redirect="https://medium.com/golangspec/sync-rwmutex-ca6c6c3208a0" data-action-source="post_header_lockup"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--smallest button--dark u-noUserSelect button--withChrome u-accentColor--buttonDark button--follow js-followButton u-marginLeft10 u-xs-hide" data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/5b90d60d16b7" data-action-source="post_header_lockup-5b90d60d16b7-------------------------follow_byline"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="ui-caption u-noWrapWithEllipsis js-testPostMetaInlineSupplemental"><time datetime="2018-03-26T14:28:26.315Z">Mar 26, 2018</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="8 min read"></span></div></div></div><p name="ff34" id="ff34" class="graf graf--p graf-after--h4">Readers-writers problems (plural since there’re some variations) occur when shared piece of data needs to be accessed by multiple threads. There’re two types of threads accessing data&#8202;—&#8202;readers and writers. Readers only read data and writers modify it. When writer has access to data then none other thread (reader or writer) can share such access. This constraint takes place in real life when e.g writer cannot modify data (like database) in atomic way so reading incomplete changes must be blocked to prevent loading corrupted data. There’re many modifications of the core problem like:</p><ul class="postList"><li name="88b2" id="88b2" class="graf graf--li graf-after--p">writers cannot be starved (waiting indefinitely for their turn)</li><li name="bc29" id="bc29" class="graf graf--li graf-after--li">readers cannot be starved</li><li name="15de" id="15de" class="graf graf--li graf-after--li">no thread shall be allowed to starve</li></ul><p name="39fd" id="39fd" class="graf graf--p graf-after--li">Concrete implementation of multi-reader / single-writer mutual exclusion lock (like <a href="https://golang.org/pkg/sync/#RWMutex" data-href="https://golang.org/pkg/sync/#RWMutex" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">sync.RWMutex</a>) solve one of readers-writers problems. Let’s see how it’s done in Go and what kind of guarantees it gives…</p><p name="d8cb" id="d8cb" class="graf graf--p graf-after--p">As a bonus we’ll look into profiling contended mutexes.</p><h3 name="dbbd" id="dbbd" class="graf graf--h3 graf-after--p">Usage</h3><p name="0e47" id="0e47" class="graf graf--p graf-after--h3">Before diving into implementation details let’s see <em class="markup--em markup--p-em">sync.RWMutex</em> in action. Program below uses reader/writer mutex to protect critical section&#8202;—&#8202;<code class="markup--code markup--p-code">sleep()</code>. To visualise the whole process critical section is decorated with counting how many readers and writers are currently executing it (<a href="https://play.golang.org/p/xoiqW0RQQE9" data-href="https://play.golang.org/p/xoiqW0RQQE9" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">source code</a>):</p><pre name="dc54" id="dc54" class="graf graf--pre graf-after--p">package main</pre><pre name="76a8" id="76a8" class="graf graf--pre graf-after--pre">import (<br>    "fmt"<br>    "math/rand"<br>    "strings"<br>    "sync"<br>    "time"<br>)</pre><pre name="6020" id="6020" class="graf graf--pre graf-after--pre">func init() {<br>    rand.Seed(time.Now().Unix())<br>}</pre><pre name="1169" id="1169" class="graf graf--pre graf-after--pre">func sleep() {<br>    time.Sleep(time.Duration(rand.Intn(1000)) * time.Millisecond)<br>}</pre><pre name="3593" id="3593" class="graf graf--pre graf-after--pre">func reader(c chan int, m *sync.RWMutex, wg *sync.WaitGroup) {<br>    sleep()<br>    m.RLock()<br>    c &lt;- 1<br>    sleep()<br>    c &lt;- -1<br>    m.RUnlock()<br>    wg.Done()<br>}</pre><pre name="1329" id="1329" class="graf graf--pre graf-after--pre">func writer(c chan int, m *sync.RWMutex, wg *sync.WaitGroup) {<br>    sleep()<br>    m.Lock()<br>    c &lt;- 1<br>    sleep()<br>    c &lt;- -1<br>    m.Unlock()<br>    wg.Done()<br>}</pre><pre name="af7a" id="af7a" class="graf graf--pre graf-after--pre">func main() {<br>    var m sync.RWMutex<br>    var rs, ws int<br>    rsCh := make(chan int)<br>    wsCh := make(chan int)<br>    go func() {<br>        for {<br>            select {<br>            case n := &lt;-rsCh:<br>                rs += n<br>            case n := &lt;-wsCh:<br>                ws += n<br>            }<br>            fmt.Printf("%s%s\n", strings.Repeat("R", rs),<br>                    strings.Repeat("W", ws))<br>        }<br>    }()<br>    wg := sync.WaitGroup{}</pre><pre name="d58b" id="d58b" class="graf graf--pre graf-after--pre">    for i := 0; i &lt; 10; i++ {<br>        wg.Add(1)<br>        go reader(rsCh, &amp;m, &amp;wg)<br>    }<br>    for i := 0; i &lt; 3; i++ {<br>        wg.Add(1)<br>        go writer(wsCh, &amp;m, &amp;wg)<br>    }<br>    wg.Wait()<br>}</pre><blockquote name="650d" id="650d" class="graf graf--blockquote graf-after--pre">Environment of programs launched on play.golang.org is deterministic (e.g. when time begins) so <code class="markup--code markup--blockquote-code">rand.Seed(time.Now().Unix())</code> will provide the same seed value and the program’s output will be most likely the same. Either put different seed each time or run program on your machine.</blockquote><p name="1b71" id="1b71" class="graf graf--p graf-after--blockquote">Sample output:</p><pre name="f550" id="f550" class="graf graf--pre graf-after--p">W</pre><pre name="251d" id="251d" class="graf graf--pre graf-after--pre">R<br>RR<br>RRR<br>RRRR<br>RRRRR<br>RRRR<br>RRR<br>RRRR<br>RRR<br>RR<br>R</pre><pre name="2221" id="2221" class="graf graf--pre graf-after--pre">W</pre><pre name="ead4" id="ead4" class="graf graf--pre graf-after--pre">R<br>RR<br>RRR<br>RRRR<br>RRR<br>RR<br>R</pre><pre name="34fe" id="34fe" class="graf graf--pre graf-after--pre">W</pre><p name="e2a7" id="e2a7" class="graf graf--p graf-after--pre">New line is printed each time set of goroutines (readers and writers) executing critical section changes. It’s visible that <em class="markup--em markup--p-em">RWMutex</em> allows for either at least one reader or exactly one writer.</p><p name="7a0a" id="7a0a" class="graf graf--p graf-after--p">What is also important and will be discussed further is that once writer calls <code class="markup--code markup--p-code">Lock()</code> then new readers are blocked. Writer waits for current set of readers to finish their jobs (departure) and when done writer is ready to go. It’s visible by decreasing number of readers one at a time and afterwards writer is displayed in a single line:</p><pre name="980f" id="980f" class="graf graf--pre graf-after--p">...<br>RRRRR<br>RRRR<br>RRR<br>RR<br>R</pre><pre name="a102" id="a102" class="graf graf--pre graf-after--pre">W</pre><pre name="a8c8" id="a8c8" class="graf graf--pre graf-after--pre">...</pre><p name="229b" id="229b" class="graf graf--p graf-after--pre">Once writer ends, previously blocked readers are resumed and next writer can start. Worth to know is the fact that if writer is done and there’re both readers and writers waiting then first readers will be unblocked and then writer. This way writer need to wait for the current set of readers so neither readers or writers will get starved.</p><h3 name="6f2f" id="6f2f" class="graf graf--h3 graf-after--p">Implementation</h3><figure name="b01c" id="b01c" class="graf graf--figure graf-after--h3"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 328px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 46.9%;"></div><div class="progressiveMedia js-progressiveMedia graf-image is-canvasLoaded is-imageLoaded" data-image-id="1*Gg_vmyWlU35r3w_L4r4SYw.jpeg" data-width="1280" data-height="600" data-action="zoom" data-action-value="1*Gg_vmyWlU35r3w_L4r4SYw.jpeg" data-scroll="native"><img src="https://cdn-images-1.medium.com/freeze/max/30/1*Gg_vmyWlU35r3w_L4r4SYw.jpeg?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas" width="75" height="35"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*Gg_vmyWlU35r3w_L4r4SYw.jpeg" src="https://cdn-images-1.medium.com/max/800/1*Gg_vmyWlU35r3w_L4r4SYw.jpeg"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*Gg_vmyWlU35r3w_L4r4SYw.jpeg"></noscript></div></div></figure><blockquote name="6c31" id="6c31" class="graf graf--blockquote graf-after--figure">Be warned that implementation being investigated (<a href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/sync/rwmutex.go" data-href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/sync/rwmutex.go" class="markup--anchor markup--blockquote-anchor" rel="nofollow noopener" target="_blank">718d6c58</a>) can change any time.</blockquote><p name="0d18" id="0d18" class="graf graf--p graf-after--blockquote"><em class="markup--em markup--p-em">RWMutex</em> exposes two methods used by readers (<em class="markup--em markup--p-em">RLock</em> and <em class="markup--em markup--p-em">RUnlock</em>) and two dedicated for writers (<em class="markup--em markup--p-em">Lock</em> and <em class="markup--em markup--p-em">Unlock</em>).</p><h4 name="a177" id="a177" class="graf graf--h4 graf-after--p">RLock</h4><p name="e5ed" id="e5ed" class="graf graf--p graf-after--h4">For the sake of brevity let’s skip parts related to race detector (they will be replaced by&nbsp;<code class="markup--code markup--p-code">...</code>).</p><pre name="6d41" id="6d41" class="graf graf--pre graf-after--p">func (rw *RWMutex) RLock() {<br>    ...<br>    if atomic.AddInt32(&amp;rw.readerCount, 1) &lt; 0 {    <br>        runtime_SemacquireMutex(&amp;rw.readerSem, false)<br>    }<br>    ...<br>}</pre><p name="2325" id="2325" class="graf graf--p graf-after--pre">Field <em class="markup--em markup--p-em">readerCount</em> is an <em class="markup--em markup--p-em">int32</em> value indicating number of pending readers&#8202;—&#8202;already reading data or blocked by writer. This is basically the number of readers which have called <em class="markup--em markup--p-em">RLock</em> function but no <em class="markup--em markup--p-em">RUnlock</em> yet.</p><p name="5bd5" id="5bd5" class="graf graf--p graf-after--p"><a href="https://golang.org/pkg/sync/atomic/#AddInt32" data-href="https://golang.org/pkg/sync/atomic/#AddInt32" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">atomic.AddInt32</a> is the atomic equivalent of:</p><pre name="3fc7" id="3fc7" class="graf graf--pre graf-after--p">*addr += delta<br>return *addr</pre><p name="f812" id="f812" class="graf graf--p graf-after--pre">where <em class="markup--em markup--p-em">addr</em> has type <code class="markup--code markup--p-code">*int32</code> and <em class="markup--em markup--p-em">delta</em> has type <code class="markup--code markup--p-code">int32</code>. Because it’s atomic operation there is no risk that adding delta will interfere with other threads (more about <a href="https://en.wikipedia.org/wiki/Fetch-and-add" data-href="https://en.wikipedia.org/wiki/Fetch-and-add" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">fetch-and-add</a>).</p><blockquote name="04df" id="04df" class="graf graf--blockquote graf-after--p"><em class="markup--em markup--blockquote-em">If writers don’t come into play then </em>readerCount<em class="markup--em markup--blockquote-em"> is always greater than or equal to 0 and readers have fast non-blocking path involving only calls of </em>atomic.AddInt32.</blockquote><h4 name="cbd4" id="cbd4" class="graf graf--h4 graf-after--blockquote">Semaphore</h4><p name="b37a" id="b37a" class="graf graf--p graf-after--h4">It’s a data structure invented by Edsger Dijkstra and it’s useful to solve many synchronization problems. It’s an integer with two operations:</p><ul class="postList"><li name="e39d" id="e39d" class="graf graf--li graf-after--p"><em class="markup--em markup--li-em">acquire</em> (known also as <em class="markup--em markup--li-em">wait</em>, <em class="markup--em markup--li-em">decrement</em> or P)</li><li name="5ae3" id="5ae3" class="graf graf--li graf-after--li"><em class="markup--em markup--li-em">release</em> (<em class="markup--em markup--li-em">signal</em>, <em class="markup--em markup--li-em">increment</em> or <em class="markup--em markup--li-em">V</em>)</li></ul><p name="155b" id="155b" class="graf graf--p graf-after--li">Operation <em class="markup--em markup--p-em">acquire</em> decreases the semaphore by 1. If the result is negative then thread blocks and cannot resume until other thread will increment the semaphore. If result is positive then thread continues execution.</p><p name="042b" id="042b" class="graf graf--p graf-after--p">Operation <em class="markup--em markup--p-em">release</em> increases the semaphore by 1. If there’re blocked threads then one of them gets unblocked.</p><p name="3389" id="3389" class="graf graf--p graf-after--p">Go’s runtime provides <em class="markup--em markup--p-em">runtime_SemacquireMutex and runtime_Semrelease</em> functions which are used e.g. to implement <em class="markup--em markup--p-em">sync.RWMutex.</em></p><h4 name="d186" id="d186" class="graf graf--h4 graf-after--p">Lock</h4><pre name="b78f" id="b78f" class="graf graf--pre graf-after--h4">func (rw *RWMutex) Lock() {<br>    ...<br>    rw.w.Lock()<br>    r := atomic.AddInt32(&amp;rw.readerCount, -rwmutexMaxReaders) + rwmutexMaxReaders<br>    if r != 0 &amp;&amp; atomic.AddInt32(&amp;rw.readerWait, r) != 0 {     <br>        runtime_SemacquireMutex(&amp;rw.writerSem, false)<br>    }<br>    ...<br>}</pre><p name="2edd" id="2edd" class="graf graf--p graf-after--pre">Method <em class="markup--em markup--p-em">Lock</em> is used by writers to get exclusive access to shared data. First it’ll acquire a mutex <em class="markup--em markup--p-em">w</em> which excludes other writers. This mutex is unlocked at the very end of <em class="markup--em markup--p-em">Unlock</em> function. Next it decreases <em class="markup--em markup--p-em">readerCount</em> by <em class="markup--em markup--p-em">rwmutexMaxReaders</em> (<code class="markup--code markup--p-code">1 &lt;&lt; 30</code>). When <em class="markup--em markup--p-em">readerCount</em> becomes negative then <em class="markup--em markup--p-em">RLock</em> will block upcoming readers:</p><pre name="7769" id="7769" class="graf graf--pre graf-after--p">if atomic.AddInt32(&amp;rw.readerCount, 1) &lt; 0 {<br>    // A writer is pending, wait for it.    <br>    runtime_SemacquireMutex(&amp;rw.readerSem, false)<br>}</pre><p name="0f99" id="0f99" class="graf graf--p graf-after--pre">Since new readers will be blocked then what happens with readers already running? Field <em class="markup--em markup--p-em">readerWait is </em>used to remember current number of readers and block writer on semaphore. This semaphore will be unblocked when last reader unlocks the mutex in <em class="markup--em markup--p-em">RUnlock</em> method discussed below.</p><p name="0560" id="0560" class="graf graf--p graf-after--p">If there aren’t active readers then writer simply continues its execution.</p><h4 name="aac6" id="aac6" class="graf graf--h4 graf-after--p">rwmutexMaxReaders</h4><p name="02aa" id="02aa" class="graf graf--p graf-after--h4">In <a href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/sync/rwmutex.go" data-href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/sync/rwmutex.go" class="markup--anchor markup--p-anchor" rel="noopener nofollow" target="_blank">rwmutex.go</a> there is a constant:</p><pre name="ec89" id="ec89" class="graf graf--pre graf-after--p">const rwmutexMaxReaders = 1 &lt;&lt; 30</pre><p name="ca86" id="ca86" class="graf graf--p graf-after--pre">What it does and what is the meaning of <code class="markup--code markup--p-code">1 &lt;&lt; 30</code> number?</p><p name="25a2" id="25a2" class="graf graf--p graf-after--p">Field <em class="markup--em markup--p-em">readerCount</em> is of type <a href="https://golang.org/pkg/builtin/#int32" data-href="https://golang.org/pkg/builtin/#int32" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">int32</a> so has range:</p><pre name="63dd" id="63dd" class="graf graf--pre graf-after--p"><code class="markup--code markup--pre-code">[-1 &lt;&lt; 31, (1 &lt;&lt; 31) — 1] or [-2147483648, 2147483647]</code></pre><p name="225d" id="225d" class="graf graf--p graf-after--pre"><em class="markup--em markup--p-em">RWMutex</em> uses this field both for counting pending readers and to mark pending writer. In <em class="markup--em markup--p-em">Lock</em> method:</p><pre name="4ffc" id="4ffc" class="graf graf--pre graf-after--p">r := atomic.AddInt32(&amp;rw.readerCount, -rwmutexMaxReaders) + rwmutexMaxReaders</pre><p name="a70f" id="a70f" class="graf graf--p graf-after--pre">field <em class="markup--em markup--p-em">readerCount</em> is decreased by <code class="markup--code markup--p-code">1&lt;&lt;30</code>. Negative value of <em class="markup--em markup--p-em">readerCount</em> means that writer is pending and <code class="markup--code markup--p-code">readerCount + rwmutexMaxReaders</code> is the current number of pending readers. It also limits how many readers can be pending. If we would have <em class="markup--em markup--p-em">rwmutexMaxReaders</em> or more pending readers then <em class="markup--em markup--p-em">readerCount</em> would be non-negative which would collapse the whole mechanism. So the actual limit on the number of readers is:</p><pre name="0f92" id="0f92" class="graf graf--pre graf-after--p">rwmutexMaxReaders - 1</pre><p name="5b3f" id="5b3f" class="graf graf--p graf-after--pre">which is still over a billion&#8202;—&#8202;1073741823.</p><h4 name="a6c6" id="a6c6" class="graf graf--h4 graf-after--p">RUnlock</h4><pre name="fa95" id="fa95" class="graf graf--pre graf-after--h4">func (rw *RWMutex) RUnlock() {<br>    ...<br>    if r := atomic.AddInt32(&amp;rw.readerCount, -1); r &lt; 0 {<br>        if r+1 == 0 || r+1 == -rwmutexMaxReaders {<br>            race.Enable()<br>            throw("sync: RUnlock of unlocked RWMutex")<br>        }<br>        // A writer is pending.<br>        if atomic.AddInt32(&amp;rw.readerWait, -1) == 0 {<br>            // The last reader unblocks the writer.       <br>            runtime_Semrelease(&amp;rw.writerSem, false)<br>        }<br>    }<br>    ...<br>}</pre><p name="e42c" id="e42c" class="graf graf--p graf-after--pre">This method decrements <em class="markup--em markup--p-em">readerCount</em> (incremented by <em class="markup--em markup--p-em">RLock</em>). If <em class="markup--em markup--p-em">readerCount</em> is negative then it means that writer is either waiting or running. It’s because because <em class="markup--em markup--p-em">readerCount</em> has been decreased by <em class="markup--em markup--p-em">rwmutexMaxReaders</em> in <em class="markup--em markup--p-em">Lock</em> method. Afterwards it’s checked if number of departing readers (<em class="markup--em markup--p-em">readerWait</em>) is finally 0 because it means that writer can finally acquire semaphore.</p><h4 name="13a4" id="13a4" class="graf graf--h4 graf-after--p">Unlock</h4><pre name="c84a" id="c84a" class="graf graf--pre graf-after--h4">func (rw *RWMutex) Unlock() {<br>    ...<br>    r := atomic.AddInt32(&amp;rw.readerCount, rwmutexMaxReaders)<br>    if r &gt;= rwmutexMaxReaders {<br>        race.Enable()<br>        throw("sync: Unlock of unlocked RWMutex")<br>    }<br>    for i := 0; i &lt; int(r); i++ {<br>        runtime_Semrelease(&amp;rw.readerSem, false)<br>    }<br>    rw.w.Unlock()<br>    ...<br>}</pre><p name="cee4" id="cee4" class="graf graf--p graf-after--pre">To unlock the mutex held by writer first <em class="markup--em markup--p-em">readerCount</em> is increased by <em class="markup--em markup--p-em">rwmutexMaxReaders</em> so it’ll be again non-negative number. If <em class="markup--em markup--p-em">readerCount</em> is greater than zero then it means that some readers were waiting for writer to finish so now it’s time to wake them up. Afterwards writer mutex is released to allow writer to lock the <em class="markup--em markup--p-em">RWMutex</em> for writing.</p><p name="972d" id="972d" class="graf graf--p graf-after--p"><em class="markup--em markup--p-em">Unlock</em> and <em class="markup--em markup--p-em">Runlock</em> methods will throw an error if reader or writer will try to unlock unlocked mutex (<a href="https://play.golang.org/p/YMdFET74olU" data-href="https://play.golang.org/p/YMdFET74olU" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">source code</a>):</p><pre name="0685" id="0685" class="graf graf--pre graf-after--p">m := sync.RWMutex{}<br>m.Unlock()</pre><p name="3c35" id="3c35" class="graf graf--p graf-after--pre">Output:</p><pre name="fc40" id="fc40" class="graf graf--pre graf-after--p">fatal error: sync: Unlock of unlocked RWMutex<br>...</pre><h3 name="fc3f" id="fc3f" class="graf graf--h3 graf-after--pre">Recursive read&nbsp;locking</h3><p name="96cf" id="96cf" class="graf graf--p graf-after--h3">Documentation says:</p><blockquote name="f016" id="f016" class="graf graf--blockquote graf-after--p"><em class="markup--em markup--blockquote-em">If a goroutine holds a </em>RWMutex<em class="markup--em markup--blockquote-em"> for reading and another goroutine might call </em>Lock<em class="markup--em markup--blockquote-em">, no goroutine should expect to be able to acquire a read lock until the initial read lock is released. In particular, this prohibits recursive read locking. This is to ensure that the lock eventually becomes available; a blocked </em>Lock<em class="markup--em markup--blockquote-em"> call excludes new readers from acquiring the lock.</em></blockquote><p name="ceae" id="ceae" class="graf graf--p graf-after--blockquote"><em class="markup--em markup--p-em">RWMutex</em> works in a way that if there is a pending writer then all attempts to call <em class="markup--em markup--p-em">RLock</em> will lock no matter if e.g. read lock has been already acquired (<a href="https://play.golang.org/p/XNndlaZ6Ema" data-href="https://play.golang.org/p/XNndlaZ6Ema" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">source code</a>):</p><pre name="27f7" id="27f7" class="graf graf--pre graf-after--p">package main</pre><pre name="6253" id="6253" class="graf graf--pre graf-after--pre">import (<br>    "fmt"<br>    "sync"<br>    "time"<br>)</pre><pre name="a218" id="a218" class="graf graf--pre graf-after--pre">var m sync.RWMutex</pre><pre name="ae04" id="ae04" class="graf graf--pre graf-after--pre">func f(n int) int {<br>    if n &lt; 1 {<br>        return 0<br>    }<br>    fmt.Println("RLock")<br>    m.RLock()<br>    defer func() {<br>        fmt.Println("RUnlock")<br>        m.RUnlock()<br>    }()<br>    time.Sleep(100 * time.Millisecond)<br>    return f(n-1) + n<br>}</pre><pre name="41ed" id="41ed" class="graf graf--pre graf-after--pre">func main() {<br>    done := make(chan int)<br>    go func() {<br>        time.Sleep(200 * time.Millisecond)<br>        fmt.Println("Lock")<br>        m.Lock()<br>        fmt.Println("Unlock")<br>        m.Unlock()<br>        done &lt;- 1<br>    }()<br>    f(4)<br>    &lt;-done<br>}</pre><p name="4ab2" id="4ab2" class="graf graf--p graf-after--pre">Output:</p><pre name="1ccd" id="1ccd" class="graf graf--pre graf-after--p">RLock<br>RLock<br>RLock<br>Lock<br>RLock<br>fatal error: all goroutines are asleep - deadlock!</pre><h3 name="31a9" id="31a9" class="graf graf--h3 graf-after--pre">Copying locks</h3><p name="898d" id="898d" class="graf graf--p graf-after--h3"><code class="markup--code markup--p-code">go tool vet</code> is able to detect if locks are copied by value which can result in deadlocks. More about it in one of previous stories:</p><div name="7a50" id="7a50" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://medium.com/golangspec/detect-locks-passed-by-value-in-go-efb4ac9a3f2b" data-href="https://medium.com/golangspec/detect-locks-passed-by-value-in-go-efb4ac9a3f2b" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://medium.com/golangspec/detect-locks-passed-by-value-in-go-efb4ac9a3f2b"><strong class="markup--strong markup--mixtapeEmbed-strong">Detect locks passed by value in Go</strong><br><em class="markup--em markup--mixtapeEmbed-em">Introduction to `go tool vet -copylocks`</em>medium.com</a><a href="https://medium.com/golangspec/detect-locks-passed-by-value-in-go-efb4ac9a3f2b" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="806b15c81142193b28b3eb927d5f4483" data-thumbnail-img-id="1*Ws5zOVBx_eVknQRK3_KDYw.jpeg" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*Ws5zOVBx_eVknQRK3_KDYw.jpeg);"></a></div><h3 name="3646" id="3646" class="graf graf--h3 graf-after--mixtapeEmbed">Performance</h3><p name="490d" id="490d" class="graf graf--p graf-after--h3">Some time ago it was discovered that <em class="markup--em markup--p-em">RWMutex</em>’s performance degrades with increased number of CPU cores&#8202;—&#8202;<a href="https://github.com/golang/go/issues/17973" data-href="https://github.com/golang/go/issues/17973" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://github.com/golang/go/issues/17973</a>.</p><h3 name="d4ef" id="d4ef" class="graf graf--h3 graf-after--p">Contention</h3><p name="85f6" id="85f6" class="graf graf--p graf-after--h3">Go ≥ 1.8 enables profiling contended mutex (<a href="https://github.com/golang/go/commit/ca922b6d363b6ca47822188dcbc5b92d912c7a4b" data-href="https://github.com/golang/go/commit/ca922b6d363b6ca47822188dcbc5b92d912c7a4b" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">patch</a>). Let’s see how it works:</p><pre name="be1d" id="be1d" class="graf graf--pre graf-after--p">package main</pre><pre name="85f9" id="85f9" class="graf graf--pre graf-after--pre">import (<br>    "net/http"<br>    _ "net/http/pprof"<br>    "runtime"<br>    "sync"<br>    "time"<br>)</pre><pre name="c548" id="c548" class="graf graf--pre graf-after--pre">func main() {<br>    var mu sync.Mutex<br>    runtime.SetMutexProfileFraction(5)<br>    for i := 0; i &lt; 10; i++ {<br>        go func() {<br>            for {<br>                mu.Lock()<br>                time.Sleep(100 * time.Millisecond)<br>                mu.Unlock()<br>            }<br>        }()<br>    }<br>    http.ListenAndServe(":8888", nil)<br>}</pre><pre name="0917" id="0917" class="graf graf--pre graf-after--pre">&gt; go build mutexcontention.go<br>&gt; ./mutexcontention</pre><p name="681a" id="681a" class="graf graf--p graf-after--pre">While the program <em class="markup--em markup--p-em">mutexcontention</em> is running:</p><pre name="6b76" id="6b76" class="graf graf--pre graf-after--p">&gt; go tool pprof mutexcontention <a href="http://localhost:8888/debug/pprof/mutex?debug=1" data-href="http://localhost:8888/debug/pprof/mutex?debug=1" class="markup--anchor markup--pre-anchor" target="_blank">http://localhost:8888/debug/pprof/mutex?debug=1</a><br>Fetching profile over HTTP from <a href="http://localhost:8888/debug/pprof/mutex?debug=1" data-href="http://localhost:8888/debug/pprof/mutex?debug=1" class="markup--anchor markup--pre-anchor" target="_blank">http://localhost:8888/debug/pprof/mutex?debug=1</a><br>Saved profile in /Users/mlowicki/pprof/pprof.mutexcontention.contentions.delay.003.pb.gz<br>File: mutexcontention<br>Type: delay<br>Entering interactive mode (type "help" for commands, "o" for options)<br>(pprof) list main<br>Total: 57.28s<br>ROUTINE ======================== main.main.func1 in /Users/mlowicki/projects/golang/src/github.com/mlowicki/mutexcontention/mutexcontention.go<br>0     57.28s (flat, cum)   100% of Total<br>.          .     14:   for i := 0; i &lt; 10; i++ {<br>.          .     15:           go func() {<br>.          .     16:                   for {<br>.          .     17:                           mu.Lock()<br>.          .     18:                           time.Sleep(100 * time.Millisecond)<br>.     57.28s     19:                           mu.Unlock()<br>.          .     20:                   }<br>.          .     21:           }()<br>.          .     22:   }<br>.          .     23:<br>.          .     24:   http.ListenAndServe(":8888", nil)</pre><p name="7041" id="7041" class="graf graf--p graf-after--pre">What’s this 57.28s and why it points to <code class="markup--code markup--p-code">mu.Unlock()</code>&nbsp;?</p><p name="2b7b" id="2b7b" class="graf graf--p graf-after--p">When goroutine blocks on mutex by calling <em class="markup--em markup--p-em">Lock</em> method then exact time when it happens is recorded&#8202;—&#8202;<em class="markup--em markup--p-em">acquiretime</em>. Afterwards when another goroutine unlocks that mutex and there is at least one goroutine waiting to acquire it then one of them is unblocked and <em class="markup--em markup--p-em">mutexevent</em> function is <a href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/runtime/sema.go#L186" data-href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/runtime/sema.go#L186" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">called</a>. Function <em class="markup--em markup--p-em">mutexevent</em> checks if based on rate set by <a href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/runtime/mprof.go#L439" data-href="https://github.com/golang/go/blob/718d6c5880fe3507b1d224789b29bc2410fc9da5/src/runtime/mprof.go#L439" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">SetMutexProfileFraction</a> this particular event should be saved or discarded. Such event contains time spent on waiting (<code class="markup--code markup--p-code">current time&#8202;—&#8202;acquiretime</code>). In listing above total wait time across all goroutines blocked on particular mutex is gathered and displayed.</p><p name="aa38" id="aa38" class="graf graf--p graf-after--p">Contention on reader lock (<em class="markup--em markup--p-em">Rlock</em> and <em class="markup--em markup--p-em">RUnlock</em>) will be added in Go 1.11 (<a href="https://github.com/golang/go/commit/88ba64582703cea0d66a098730215554537572de" data-href="https://github.com/golang/go/commit/88ba64582703cea0d66a098730215554537572de" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">patch</a>).</p><h3 name="3c07" id="3c07" class="graf graf--h3 graf-after--p">Resources</h3><ul class="postList"><li name="1510" id="1510" class="graf graf--li graf--startsWithDoubleQuote graf-after--h3">“The Little Book of Semaphores” by Allen B. Downey</li><li name="0c66" id="0c66" class="graf graf--li graf-after--li"><a href="https://golang.org/pkg/sync/#RWMutex" data-href="https://golang.org/pkg/sync/#RWMutex" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">Documentation of sync.RWMutex</a></li><li name="ea1d" id="ea1d" class="graf graf--li graf-after--li"><a href="https://en.wikipedia.org/wiki/Readers–writers_problem" data-href="https://en.wikipedia.org/wiki/Readers–writers_problem" class="markup--anchor markup--li-anchor" rel="nofollow noopener" target="_blank">Readers-writers problem on Wikipedia</a></li><li name="9710" id="9710" class="graf graf--li graf-after--li"><a href="https://medium.com/golangspec/reusable-barriers-in-golang-156db1f75d0b" data-href="https://medium.com/golangspec/reusable-barriers-in-golang-156db1f75d0b" class="markup--anchor markup--li-anchor" target="_blank">Reusable barriers in Golang</a></li><li name="8f05" id="8f05" class="graf graf--li graf-after--li graf--trailing"><a href="https://medium.com/golangspec/synchronization-queues-in-golang-554f8e3a31a4" data-href="https://medium.com/golangspec/synchronization-queues-in-golang-554f8e3a31a4" class="markup--anchor markup--li-anchor" target="_blank">Synchronization queues in Golang</a></li></ul></div></div>
      <footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"><div class="postMetaInline postMetaInline--acknowledgments u-paddingTop5 u-paddingBottom20 js-postMetaAcknowledgments"><a class="link u-baseColor--link" href="http://creativecommons.org/licenses/by/4.0/" rel="license cc:license" target="_blank" data-tooltip="Except where otherwise noted, this work is licensed under a Creative Commons Attribution 4.0 International license by the author.">Some rights reserved</a><span class="postMetaInline-licenseIcons u-marginLeft5"><span title="You can distribute, remix, and build upon this work as long as you credit the author."><span class="svgIcon svgIcon--creativeCommonsBy svgIcon--21px"><svg class="svgIcon-use" width="21" height="21"><path d="M10.485 2c2.387 0 4.4.82 6.04 2.46C18.175 6.107 19 8.12 19 10.5c0 2.388-.81 4.376-2.43 5.965C14.85 18.155 12.823 19 10.486 19c-2.298 0-4.29-.835-5.98-2.505C2.836 14.825 2 12.827 2 10.5s.835-4.34 2.505-6.04C6.145 2.82 8.137 2 10.485 2zm.03 1.533c-1.933 0-3.567.678-4.903 2.034-1.386 1.417-2.08 3.06-2.08 4.933 0 1.882.69 3.512 2.065 4.887 1.376 1.377 3.015 2.064 4.918 2.064 1.892 0 3.54-.69 4.948-2.07 1.336-1.28 2.004-2.91 2.004-4.87 0-1.93-.68-3.57-2.034-4.93-1.356-1.35-2.995-2.03-4.918-2.03zm2.277 4.857v3.476h-.97v4.128H9.18v-4.128h-.972V8.39a.53.53 0 0 1 .16-.387.528.528 0 0 1 .387-.16h3.49c.143 0 .27.054.38.16a.52.52 0 0 1 .167.387zM9.316 6.205c0-.8.394-1.2 1.184-1.2.79 0 1.184.4 1.184 1.2 0 .79-.395 1.183-1.184 1.183-.79 0-1.184-.394-1.184-1.183z" fill-rule="evenodd"></path></svg></span></span></span> </div></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link" href="https://medium.com/tag/golang?source=post" data-action-source="post">Golang</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/programming?source=post" data-action-source="post">Programming</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/software-development?source=post" data-action-source="post">Software Development</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/coding?source=post" data-action-source="post">Coding</a></li><li><a class="link u-baseColor--link" href="https://medium.com/tag/concurrency?source=post" data-action-source="post">Concurrency</a></li></ul></div></div></div><div class="postActions js-postActionsFooter "><div class="u-flexCenter"><div class="u-flex1"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="ca6c6c3208a0" data-is-icon-29px="true" data-is-circle="true" data-has-recommend-list="true" data-source="post_actions_footer-----ca6c6c3208a0---------------------clap_footer" data-clap-string-singular="clap" data-clap-string-plural="claps"><div class="u-relative u-foreground"><button class="button button--large button--circle button--withChrome u-baseColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker clapButton--largePill u-relative u-foreground u-xs-paddingLeft13 u-width60 u-height60 u-accentColor--textNormal u-accentColor--buttonNormal clap-onboardingcollection" data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/ca6c6c3208a0" data-action-source="post_actions_footer-----ca6c6c3208a0---------------------clap_footer" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><path d="M28.86 17.342l-3.64-6.402c-.292-.433-.712-.729-1.163-.8a1.124 1.124 0 0 0-.889.213c-.63.488-.742 1.181-.33 2.061l1.222 2.587 1.4 2.46c2.234 4.085 1.511 8.007-2.145 11.663-.26.26-.526.49-.797.707 1.42-.084 2.881-.683 4.292-2.094 3.822-3.823 3.565-7.876 2.05-10.395zm-6.252 11.075c3.352-3.35 3.998-6.775 1.978-10.469l-3.378-5.945c-.292-.432-.712-.728-1.163-.8a1.122 1.122 0 0 0-.89.213c-.63.49-.742 1.182-.33 2.061l1.72 3.638a.502.502 0 0 1-.806.568l-8.91-8.91a1.335 1.335 0 0 0-1.887 1.886l5.292 5.292a.5.5 0 0 1-.707.707l-5.292-5.292-1.492-1.492c-.503-.503-1.382-.505-1.887 0a1.337 1.337 0 0 0 0 1.886l1.493 1.492 5.292 5.292a.499.499 0 0 1-.353.854.5.5 0 0 1-.354-.147L5.642 13.96a1.338 1.338 0 0 0-1.887 0 1.338 1.338 0 0 0 0 1.887l2.23 2.228 3.322 3.324a.499.499 0 0 1-.353.853.502.502 0 0 1-.354-.146l-3.323-3.324a1.333 1.333 0 0 0-1.886 0 1.325 1.325 0 0 0-.39.943c0 .356.138.691.39.943l6.396 6.397c3.528 3.53 8.86 5.313 12.821 1.353zM12.73 9.26l5.68 5.68-.49-1.037c-.518-1.107-.426-2.13.224-2.89l-3.303-3.304a1.337 1.337 0 0 0-1.886 0 1.326 1.326 0 0 0-.39.944c0 .217.067.42.165.607zm14.787 19.184c-1.599 1.6-3.417 2.392-5.353 2.392-.349 0-.7-.03-1.058-.082a7.922 7.922 0 0 1-3.667.887c-3.049 0-6.115-1.626-8.359-3.87l-6.396-6.397A2.315 2.315 0 0 1 2 19.724a2.327 2.327 0 0 1 1.923-2.296l-.875-.875a2.339 2.339 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.647l-.139-.139c-.91-.91-.91-2.39 0-3.3.884-.884 2.421-.882 3.301 0l.138.14a2.335 2.335 0 0 1 3.948-1.24l.093.092c.091-.423.291-.828.62-1.157a2.336 2.336 0 0 1 3.3 0l3.384 3.386a2.167 2.167 0 0 1 1.271-.173c.534.086 1.03.354 1.441.765.11-.549.415-1.034.911-1.418a2.12 2.12 0 0 1 1.661-.41c.727.117 1.385.565 1.853 1.262l3.652 6.423c1.704 2.832 2.025 7.377-2.205 11.607zM13.217.484l-1.917.882 2.37 2.837-.454-3.719zm8.487.877l-1.928-.86-.44 3.697 2.368-2.837zM16.5 3.293L15.478-.005h2.044L16.5 3.293z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33"><g fill-rule="evenodd"><path d="M29.58 17.1l-3.854-6.78c-.365-.543-.876-.899-1.431-.989a1.491 1.491 0 0 0-1.16.281c-.42.327-.65.736-.7 1.207v.001l3.623 6.367c2.46 4.498 1.67 8.802-2.333 12.807-.265.265-.536.505-.81.728 1.973-.222 3.474-1.286 4.45-2.263 4.166-4.165 3.875-8.6 2.215-11.36zm-4.831.82l-3.581-6.3c-.296-.439-.725-.742-1.183-.815a1.105 1.105 0 0 0-.89.213c-.647.502-.755 1.188-.33 2.098l1.825 3.858a.601.601 0 0 1-.197.747.596.596 0 0 1-.77-.067L10.178 8.21c-.508-.506-1.393-.506-1.901 0a1.335 1.335 0 0 0-.393.95c0 .36.139.698.393.95v.001l5.61 5.61a.599.599 0 1 1-.848.847l-5.606-5.606c-.001 0-.002 0-.003-.002L5.848 9.375a1.349 1.349 0 0 0-1.902 0 1.348 1.348 0 0 0 0 1.901l1.582 1.582 5.61 5.61a.6.6 0 0 1-.848.848l-5.61-5.61c-.51-.508-1.393-.508-1.9 0a1.332 1.332 0 0 0-.394.95c0 .36.139.697.393.952l2.363 2.362c.002.001.002.002.002.003l3.52 3.52a.6.6 0 0 1-.848.847l-3.522-3.523h-.001a1.336 1.336 0 0 0-.95-.393 1.345 1.345 0 0 0-.949 2.295l6.779 6.78c3.715 3.713 9.327 5.598 13.49 1.434 3.527-3.528 4.21-7.13 2.086-11.015zM11.817 7.727c.06-.328.213-.64.466-.893.64-.64 1.755-.64 2.396 0l3.232 3.232c-.82.783-1.09 1.833-.764 2.992l-5.33-5.33z"></path><path d="M13.285.48l-1.916.881 2.37 2.837z"></path><path d="M21.719 1.361L19.79.501l-.44 3.697z"></path><path d="M16.502 3.298L15.481 0h2.043z"></path></g></svg></span></span></button><div class="clapUndo u-width60 u-round u-height32 u-absolute u-borderBox u-paddingRight5 u-transition--transform200Springu-backgroundGrayLighter js-clapUndo" style="top: 14px; padding: 2px;"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-floatRight" data-action="multivote-undo" data-action-value="ca6c6c3208a0"><span class="svgIcon svgIcon--removeThin svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"></path></svg></span></button></div></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft16"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-textColorDarker" data-action="show-recommends" data-action-value="ca6c6c3208a0">272 claps</button><span class="u-xs-hide"></span></span></div></div><div class="buttonSet u-flex0"><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless u-xs-hide u-marginRight12" href="https://medium.com/p/ca6c6c3208a0/share/twitter" title="Share on Twitter" aria-label="Share on Twitter" target="_blank" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--twitterFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M22.053 7.54a4.474 4.474 0 0 0-3.31-1.455 4.526 4.526 0 0 0-4.526 4.524c0 .35.04.7.082 1.05a12.9 12.9 0 0 1-9.3-4.77c-.39.69-.61 1.46-.65 2.26.03 1.6.83 2.99 2.02 3.79-.72-.02-1.41-.22-2.02-.57-.01.02-.01.04 0 .08-.01 2.17 1.55 4 3.63 4.44-.39.08-.79.13-1.21.16-.28-.03-.57-.05-.81-.08.54 1.77 2.21 3.08 4.2 3.15a9.564 9.564 0 0 1-5.66 1.94c-.34-.03-.7-.06-1.05-.08 2 1.27 4.38 2.02 6.94 2.02 8.31 0 12.86-6.9 12.84-12.85.02-.24.01-.43 0-.65.89-.62 1.65-1.42 2.26-2.34-.82.38-1.69.62-2.59.72a4.37 4.37 0 0 0 1.94-2.51c-.84.53-1.81.9-2.83 1.13z"></path></svg></span></span></a><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless u-xs-hide u-marginRight12" href="https://medium.com/p/ca6c6c3208a0/share/facebook" title="Share on Facebook" aria-label="Share on Facebook" target="_blank" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--facebookSquare svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M23.209 5H5.792A.792.792 0 0 0 5 5.791V23.21c0 .437.354.791.792.791h9.303v-7.125H12.72v-2.968h2.375v-2.375c0-2.455 1.553-3.662 3.741-3.662 1.049 0 1.95.078 2.213.112v2.565h-1.517c-1.192 0-1.469.567-1.469 1.397v1.963h2.969l-.594 2.968h-2.375L18.11 24h5.099a.791.791 0 0 0 .791-.791V5.79a.791.791 0 0 0-.791-.79"></path></svg></span></span></a><button class="button button--large button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-show u-marginRight10" title="Share this story on Twitter or Facebook" aria-label="Share this story on Twitter or Facebook" data-action="show-share-popover" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--share svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M20.385 8H19a.5.5 0 1 0 .011 1h1.39c.43 0 .84.168 1.14.473.31.305.48.71.48 1.142v10.77c0 .43-.17.837-.47 1.142-.3.305-.71.473-1.14.473H8.62c-.43 0-.84-.168-1.144-.473a1.603 1.603 0 0 1-.473-1.142v-10.77c0-.43.17-.837.48-1.142A1.599 1.599 0 0 1 8.62 9H10a.502.502 0 0 0 0-1H8.615c-.67 0-1.338.255-1.85.766-.51.51-.765 1.18-.765 1.85v10.77c0 .668.255 1.337.766 1.848.51.51 1.18.766 1.85.766h11.77c.668 0 1.337-.255 1.848-.766.51-.51.766-1.18.766-1.85v-10.77c0-.668-.255-1.337-.766-1.848A2.61 2.61 0 0 0 20.384 8zm-8.67-2.508L14 3.207v8.362c0 .27.224.5.5.5s.5-.23.5-.5V3.2l2.285 2.285a.49.49 0 0 0 .704-.001.511.511 0 0 0 0-.708l-3.14-3.14a.504.504 0 0 0-.71 0L11 4.776a.501.501 0 0 0 .71.706" fill-rule="evenodd"></path></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon" data-action="scroll-to-responses" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"></path></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-up-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/ca6c6c3208a0" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px u-marginRight4"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px u-marginRight4"><svg class="svgIcon-use" width="29" height="29"><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"></path></svg></span></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon js-moreActionsButton" title="More actions" aria-label="More actions" data-action="more-actions"><span class="svgIcon svgIcon--more svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" viewBox="-480.5 272.5 21 21"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"></path></svg></span></button></div></div></div></div><div class="u-maxWidth740 u-paddingTop20 u-marginTop20 u-borderTopLightest container u-paddingBottom20 u-xs-paddingBottom10 js-postAttributionFooterContainer"><div class="row js-postFooterInfo"><div class="col u-size6of12 u-xs-size12of12"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState" data-user-id="5b90d60d16b7"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton" data-action="sign-up-prompt" data-sign-in-action="toggle-block-user" data-requires-token="true" data-redirect="https://medium.com/golangspec/sync-rwmutex-ca6c6c3208a0" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton" data-action="sign-up-prompt" data-sign-in-action="toggle-subscribe-user" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/user/5b90d60d16b7" data-action-source="footer_card-5b90d60d16b7-------------------------follow_footer"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell"><a class="link u-baseColor--link avatar" href="https://medium.com/@mlowicki?source=footer_card" title="Go to the profile of Michał Łowicki" aria-label="Go to the profile of Michał Łowicki" data-action-source="footer_card" data-user-id="5b90d60d16b7" dir="auto"><img src="https://cdn-images-1.medium.com/fit/c/60/60/1*3fQyAyN3cY_zYqT2FDWFig.jpeg" class="avatar-image avatar-image--small" alt="Go to the profile of Michał Łowicki"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://medium.com/@mlowicki" property="cc:attributionName" title="Go to the profile of Michał Łowicki" aria-label="Go to the profile of Michał Łowicki" rel="author cc:attributionUrl" data-user-id="5b90d60d16b7" dir="auto">Michał Łowicki</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Web Services @ Opera. Interested in Linux, Docker, NoSQL, Python, Golang and monitoring everything which moves. Never Satisfied.</p></div></li></div><div class="col u-size6of12 u-xs-size12of12 u-xs-marginTop30"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardCollection"><div class="u-marginLeft20 u-floatRight"><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton" data-action="sign-up-prompt" data-sign-in-action="toggle-follow-collection" data-requires-token="true" data-redirect="https://medium.com/_/subscribe/collection/golangspec" data-action-source="----f144e4d3c783----------------------follow_footer" data-collection-id="f144e4d3c783"><span class="button-label  js-buttonLabel">Follow</span></button></div><div class="u-tableCell "><a class="link u-baseColor--link avatar avatar--roundedRectangle" href="https://medium.com/golangspec?source=footer_card" title="Go to golangspec" aria-label="Go to golangspec" data-action-source="footer_card"><img src="https://cdn-images-1.medium.com/fit/c/60/60/1*13nN1FhuOfIfaMyjtgF6NA.png" class="avatar-image u-size60x60" alt="golangspec"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal" href="https://medium.com/golangspec?source=footer_card" rel="collection" data-action-source="footer_card">golangspec</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">A series dedicated to deeply understand Go’s specification and language’s nuances</p><div class="buttonSet"></div></div></li></div></div></div><div class="js-postFooterPlacements"><div class="streamItem streamItem--placementCardGrid js-streamItem"><div class="u-clearfix u-backgroundGrayLightest"><div class="row u-marginAuto u-maxWidth1032 u-paddingTop30 u-paddingBottom40"><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-width100pct u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackPostPresentation" data-post-id="338ae0bdc9e4" data-source="placement_card_footer_grid---------0-43" data-tracking-context="placement" data-scroll="native"><div class="u-padding15 u-borderBox u-flexColumn u-sizeFull"><a class="link link--noUnderline u-baseColor--link u-flex1 u-flexColumn" href="https://medium.com/@kent.rancourt/go-pointers-why-i-use-interfaces-in-go-338ae0bdc9e4?source=placement_card_footer_grid---------0-43" data-action-source="placement_card_footer_grid---------0-43"><div class="uiScale uiScale-ui--regular uiScale-caption--small u-textColorNormal u-marginBottom7">Also tagged Golang</div><div class="ui-h3 ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Go Pointers: Why I Use Interfaces (in Go)</div><div class="ui-body ui-clamp2 u-lineClamp2 u-textOverflowEllipsis u-maxHeight2LineHeightTighter">Emphasis on I and in Go.</div></a><div class="u-paddingBottom10 u-flex0 u-flexCenter"><div class="u-flex1 u-minWidth0 u-marginRight10"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@kent.rancourt" data-action="show-user-card" data-action-value="a6c26ddb005e" data-action-type="hover" data-user-id="a6c26ddb005e" dir="auto"><div class="u-relative u-inlineBlock u-flex0"><img src="https://cdn-images-1.medium.com/fit/c/36/36/0*xMx8Cd2t9lmdvkdK" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Kent Rancourt"><div class="avatar-halo u-absolute u-textColorGreenNormal svgIcon" style="width: calc(100% + 10px); height: calc(100% + 10px); top:-5px; left:-5px"><svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M3.44615311,11.6601601 C6.57294867,5.47967718 12.9131553,1.5 19.9642857,1.5 C27.0154162,1.5 33.3556228,5.47967718 36.4824183,11.6601601 L37.3747245,11.2087295 C34.0793076,4.69494641 27.3961457,0.5 19.9642857,0.5 C12.5324257,0.5 5.84926381,4.69494641 2.55384689,11.2087295 L3.44615311,11.6601601 Z"></path><path d="M36.4824183,28.2564276 C33.3556228,34.4369105 27.0154162,38.4165876 19.9642857,38.4165876 C12.9131553,38.4165876 6.57294867,34.4369105 3.44615311,28.2564276 L2.55384689,28.7078582 C5.84926381,35.2216412 12.5324257,39.4165876 19.9642857,39.4165876 C27.3961457,39.4165876 34.0793076,35.2216412 37.3747245,28.7078582 L36.4824183,28.2564276 Z"></path></svg></div></div></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--darker" href="https://medium.com/@kent.rancourt?source=placement_card_footer_grid---------0-43" data-action="show-user-card" data-action-source="placement_card_footer_grid---------0-43" data-action-value="a6c26ddb005e" data-action-type="hover" data-user-id="a6c26ddb005e" dir="auto">Kent Rancourt</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/@kent.rancourt/go-pointers-why-i-use-interfaces-in-go-338ae0bdc9e4?source=placement_card_footer_grid---------0-43" data-action="open-post" data-action-value="https://medium.com/@kent.rancourt/go-pointers-why-i-use-interfaces-in-go-338ae0bdc9e4?source=placement_card_footer_grid---------0-43" data-action-source="preview-listing"><time datetime="2019-01-09T21:14:00.520Z">Jan 10</time></a><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="4 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="338ae0bdc9e4" data-is-label-padded="true" data-source="placement_card_footer_grid-----338ae0bdc9e4----0-43----------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/338ae0bdc9e4" data-action-source="placement_card_footer_grid-----338ae0bdc9e4----0-43----------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="338ae0bdc9e4">161</button></span></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-up-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/338ae0bdc9e4" data-action-source="placement_card_footer_grid-----338ae0bdc9e4----0-43----------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button></div></div></div></div></div></div><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-width100pct u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackPostPresentation" data-post-id="f607681fad65" data-source="placement_card_footer_grid---------1-43" data-tracking-context="placement" data-scroll="native"><a class="link link--noUnderline u-baseColor--link" href="https://medium.com/@kevalpatel2106/why-should-you-learn-go-f607681fad65?source=placement_card_footer_grid---------1-43" data-action-source="placement_card_footer_grid---------1-43"><div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-width100pct u-borderBottomLight u-borderRadiusTop4" style="background-image: url(&quot;https://cdn-images-1.medium.com/fit/c/400/120/1*vHUiXvBE0p0fLRwFHZuAYw.gif&quot;); background-position: 50% 50% !important;"></div></a><div class="u-padding15 u-borderBox u-flexColumn u-height180"><a class="link link--noUnderline u-baseColor--link u-flex1" href="https://medium.com/@kevalpatel2106/why-should-you-learn-go-f607681fad65?source=placement_card_footer_grid---------1-43" data-action-source="placement_card_footer_grid---------1-43"><div class="uiScale uiScale-ui--regular uiScale-caption--small u-textColorNormal u-marginBottom7"><div class="u-floatRight u-textColorNormal"><span class="svgIcon svgIcon--star svgIcon--15px"><svg class="svgIcon-use" width="15" height="15"><path d="M7.438 2.324c.034-.099.09-.099.123 0l1.2 3.53a.29.29 0 0 0 .26.19h3.884c.11 0 .127.049.038.111L9.8 8.327a.271.271 0 0 0-.099.291l1.2 3.53c.034.1-.011.131-.098.069l-3.142-2.18a.303.303 0 0 0-.32 0l-3.145 2.182c-.087.06-.132.03-.099-.068l1.2-3.53a.271.271 0 0 0-.098-.292L2.056 6.146c-.087-.06-.071-.112.038-.112h3.884a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></div><div class="u-noWrapWithEllipsis u-marginRight40">Also tagged Golang</div></div><div class="ui-h3 ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">Why should you learn Go?</div></a><div class="u-paddingBottom10 u-flex0 u-flexCenter"><div class="u-flex1 u-minWidth0 u-marginRight10"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.com/@kevalpatel2106" data-action="show-user-card" data-action-value="dce15297d516" data-action-type="hover" data-user-id="dce15297d516" dir="auto"><div class="u-relative u-inlineBlock u-flex0"><img src="https://cdn-images-1.medium.com/fit/c/36/36/1*Nj-bY5v0-iBgsf3boes5Wg.png" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Keval Patel"><div class="avatar-halo u-absolute u-textColorGreenNormal svgIcon" style="width: calc(100% + 10px); height: calc(100% + 10px); top:-5px; left:-5px"><svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M3.44615311,11.6601601 C6.57294867,5.47967718 12.9131553,1.5 19.9642857,1.5 C27.0154162,1.5 33.3556228,5.47967718 36.4824183,11.6601601 L37.3747245,11.2087295 C34.0793076,4.69494641 27.3961457,0.5 19.9642857,0.5 C12.5324257,0.5 5.84926381,4.69494641 2.55384689,11.2087295 L3.44615311,11.6601601 Z"></path><path d="M36.4824183,28.2564276 C33.3556228,34.4369105 27.0154162,38.4165876 19.9642857,38.4165876 C12.9131553,38.4165876 6.57294867,34.4369105 3.44615311,28.2564276 L2.55384689,28.7078582 C5.84926381,35.2216412 12.5324257,39.4165876 19.9642857,39.4165876 C27.3961457,39.4165876 34.0793076,35.2216412 37.3747245,28.7078582 L36.4824183,28.2564276 Z"></path></svg></div></div></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--darker" href="https://medium.com/@kevalpatel2106?source=placement_card_footer_grid---------1-43" data-action="show-user-card" data-action-source="placement_card_footer_grid---------1-43" data-action-value="dce15297d516" data-action-type="hover" data-user-id="dce15297d516" dir="auto">Keval Patel</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.com/@kevalpatel2106/why-should-you-learn-go-f607681fad65?source=placement_card_footer_grid---------1-43" data-action="open-post" data-action-value="https://medium.com/@kevalpatel2106/why-should-you-learn-go-f607681fad65?source=placement_card_footer_grid---------1-43" data-action-source="preview-listing"><time datetime="2017-01-08T12:56:03.803Z">Jan 8, 2017</time></a><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="8 min read"></span><span class="u-paddingLeft4"><span class="svgIcon svgIcon--star svgIcon--15px"><svg class="svgIcon-use" width="15" height="15"><path d="M7.438 2.324c.034-.099.09-.099.123 0l1.2 3.53a.29.29 0 0 0 .26.19h3.884c.11 0 .127.049.038.111L9.8 8.327a.271.271 0 0 0-.099.291l1.2 3.53c.034.1-.011.131-.098.069l-3.142-2.18a.303.303 0 0 0-.32 0l-3.145 2.182c-.087.06-.132.03-.099-.068l1.2-3.53a.271.271 0 0 0-.098-.292L2.056 6.146c-.087-.06-.071-.112.038-.112h3.884a.29.29 0 0 0 .26-.19l1.2-3.52z"></path></svg></span></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="f607681fad65" data-is-label-padded="true" data-source="placement_card_footer_grid-----f607681fad65----1-43----------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/f607681fad65" data-action-source="placement_card_footer_grid-----f607681fad65----1-43----------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="f607681fad65">51K</button></span></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-up-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/f607681fad65" data-action-source="placement_card_footer_grid-----f607681fad65----1-43----------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button></div></div></div></div></div></div><div class="col u-padding8 u-xs-size12of12 u-size4of12"><div class="uiScale uiScale-ui--small uiScale-caption--regular u-height280 u-width100pct u-backgroundWhite u-borderCardBorder u-boxShadow u-borderBox u-borderRadius4 js-trackPostPresentation" data-post-id="99c0e2fdd78a" data-source="placement_card_footer_grid---------2-43" data-tracking-context="placement" data-scroll="native"><a class="link link--noUnderline u-baseColor--link" href="https://medium.freecodecamp.org/javascript-naming-conventions-dos-and-don-ts-99c0e2fdd78a?source=placement_card_footer_grid---------2-43" data-action-source="placement_card_footer_grid---------2-43"><div class="u-backgroundCover u-backgroundColorGrayLight u-height100 u-width100pct u-borderBottomLight u-borderRadiusTop4" style="background-image: url(&quot;https://cdn-images-1.medium.com/fit/c/400/120/1*xiJRjtRIJoosH5sI_fMdgQ.jpeg&quot;); background-position: 50% 50% !important;"></div></a><div class="u-padding15 u-borderBox u-flexColumn u-height180"><a class="link link--noUnderline u-baseColor--link u-flex1" href="https://medium.freecodecamp.org/javascript-naming-conventions-dos-and-don-ts-99c0e2fdd78a?source=placement_card_footer_grid---------2-43" data-action-source="placement_card_footer_grid---------2-43"><div class="uiScale uiScale-ui--regular uiScale-caption--small u-textColorNormal u-marginBottom7">Also tagged Programming</div><div class="ui-h3 ui-clamp2 u-textColorDarkest u-contentSansBold u-fontSize24 u-maxHeight2LineHeightTighter u-lineClamp2 u-textOverflowEllipsis u-letterSpacingTight u-paddingBottom2">JavaScript naming conventions: do’s and don’ts</div></a><div class="u-paddingBottom10 u-flex0 u-flexCenter"><div class="u-flex1 u-minWidth0 u-marginRight10"><div class="u-flexCenter"><div class="postMetaInline-avatar u-flex0"><a class="link u-baseColor--link avatar" href="https://medium.freecodecamp.org/@woz.brandon" data-action="show-user-card" data-action-value="f6d69c3ebf01" data-action-type="hover" data-user-id="f6d69c3ebf01" data-collection-slug="free-code-camp" dir="auto"><div class="u-relative u-inlineBlock u-flex0"><img src="https://cdn-images-1.medium.com/fit/c/36/36/1*xwfJvDu_rfPgdHAJ3Ip2bA.jpeg" class="avatar-image u-size36x36 u-xs-size32x32" alt="Go to the profile of Brandon Wozniewicz"><div class="avatar-halo u-absolute u-textColorGreenNormal svgIcon" style="width: calc(100% + 10px); height: calc(100% + 10px); top:-5px; left:-5px"><svg viewBox="0 0 40 40" xmlns="http://www.w3.org/2000/svg"><path d="M3.44615311,11.6601601 C6.57294867,5.47967718 12.9131553,1.5 19.9642857,1.5 C27.0154162,1.5 33.3556228,5.47967718 36.4824183,11.6601601 L37.3747245,11.2087295 C34.0793076,4.69494641 27.3961457,0.5 19.9642857,0.5 C12.5324257,0.5 5.84926381,4.69494641 2.55384689,11.2087295 L3.44615311,11.6601601 Z"></path><path d="M36.4824183,28.2564276 C33.3556228,34.4369105 27.0154162,38.4165876 19.9642857,38.4165876 C12.9131553,38.4165876 6.57294867,34.4369105 3.44615311,28.2564276 L2.55384689,28.7078582 C5.84926381,35.2216412 12.5324257,39.4165876 19.9642857,39.4165876 C27.3961457,39.4165876 34.0793076,35.2216412 37.3747245,28.7078582 L36.4824183,28.2564276 Z"></path></svg></div></div></a></div><div class="postMetaInline postMetaInline-authorLockup ui-captionStrong u-flex1 u-noWrapWithEllipsis"><a class="ds-link ds-link--styleSubtle link link--darken link--darker" href="https://medium.freecodecamp.org/@woz.brandon?source=placement_card_footer_grid---------2-43" data-action="show-user-card" data-action-source="placement_card_footer_grid---------2-43" data-action-value="f6d69c3ebf01" data-action-type="hover" data-user-id="f6d69c3ebf01" data-collection-slug="free-code-camp" dir="auto">Brandon Wozniewicz</a><div class="ui-caption u-fontSize12 u-baseColor--textNormal u-textColorNormal js-postMetaInlineSupplemental"><a class="link link--darken" href="https://medium.freecodecamp.org/javascript-naming-conventions-dos-and-don-ts-99c0e2fdd78a?source=placement_card_footer_grid---------2-43" data-action="open-post" data-action-value="https://medium.freecodecamp.org/javascript-naming-conventions-dos-and-don-ts-99c0e2fdd78a?source=placement_card_footer_grid---------2-43" data-action-source="preview-listing"><time datetime="2019-03-06T15:51:47.277Z">Mar 6</time></a><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="3 min read"></span></div></div></div></div><div class="u-flex0 u-flexCenter"><div class="buttonSet"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="99c0e2fdd78a" data-is-label-padded="true" data-source="placement_card_footer_grid-----99c0e2fdd78a----2-43----------------clap_preview"><div class="u-relative u-foreground"><button class="button button--primary button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker" data-action="sign-up-prompt" data-sign-in-action="multivote" data-requires-token="true" data-redirect="https://medium.com/_/vote/p/99c0e2fdd78a" data-action-source="placement_card_footer_grid-----99c0e2fdd78a----2-43----------------clap_preview" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.739 0l.761 2.966L13.261 0z"></path><path d="M14.815 3.776l1.84-2.551-1.43-.471z"></path><path d="M8.378 1.224l1.84 2.551L9.81.753z"></path><path d="M20.382 21.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L4.11 14.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L6.43 8.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L18.628 14c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM10.99 5.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"></path></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><g fill-rule="evenodd"><path d="M11.738 0l.762 2.966L13.262 0z"></path><path d="M16.634 1.224l-1.432-.47-.408 3.022z"></path><path d="M9.79.754l-1.431.47 1.84 2.552z"></path><path d="M22.472 13.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"></path><path d="M12.58 9.887c-.156-.83.096-1.569.692-2.142L10.78 5.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"></path><path d="M15.812 9.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L7.2 6.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L5.046 8.54 3.802 7.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394L3.647 9.93l4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L2.89 10.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C19.74 19.8 20.271 17 18.62 13.982L15.812 9.04z"></path></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-disablePointerEvents u-marginLeft4" data-action="show-recommends" data-action-value="99c0e2fdd78a">1.8K</button></span></div></div><div class="u-height20 u-borderRightLighter u-inlineBlock u-relative u-marginRight10 u-marginLeft12"></div><div class="buttonSet"><button class="button button--chromeless is-touchIconFadeInPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton" title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="sign-up-prompt" data-sign-in-action="add-to-bookmarks" data-requires-token="true" data-redirect="https://medium.com/_/bookmark/p/99c0e2fdd78a" data-action-source="placement_card_footer_grid-----99c0e2fdd78a----2-43----------------bookmark_preview"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126a.508.508 0 0 0 .708-.03.5.5 0 0 0 .118-.285H19V6zm-6.838 9.97L7 19.636V6c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v13.637l-5.162-3.668a.49.49 0 0 0-.676 0z" fill-rule="evenodd"></path></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"><path d="M19 6c0-1.1-.9-2-2-2H8c-1.1 0-2 .9-2 2v14.66h.012c.01.103.045.204.12.285a.5.5 0 0 0 .706.03L12.5 16.85l5.662 4.126c.205.183.52.17.708-.03a.5.5 0 0 0 .118-.285H19V6z"></path></svg></span></span></button></div></div></div></div></div></div></div></div></div></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper" data-action-scope="_actionscope_5"><div class="container u-maxWidth740"><div class="responsesStreamWrapper u-maxWidth640 js-responsesStreamWrapper"><div class="container responsesStream-title u-paddingTop15"><div class="row"><header class="heading"><div class="u-clearfix"><div class="heading-content u-floatLeft"><span class="heading-title heading-title--semibold">Responses</span></div></div></header></div></div><div class="responsesStream-editor cardChromeless u-marginBottom20 u-paddingLeft20 u-paddingRight20 js-responsesStreamEditor"><div class="u-paddingTop30 u-paddingBottom30 u-paddingLeft0 u-paddingRight0 u-borderBottomLightest js-responsesLoggedOutPrompt"><button class="button button--chromeless is-touchIconBlackPulse u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--withIconAndLabel button--loggedOutPrompt" data-action="sign-up-prompt" data-redirect="https://medium.com/golangspec/sync-rwmutex-ca6c6c3208a0#--respond" data-skip-onboarding="true" data-action-source="logged_out_response_prompt--------------------------respond_box"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29"><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"></path></svg></span><span class="button-label  js-buttonLabel">Write a response…</span></button></div></div><div class="responsesStream js-responsesStream"></div><div class="container u-hide js-showOtherResponses"><div class="row"><button class="button button--primary button--withChrome u-accentColor--buttonNormal responsesStream-showOtherResponses cardChromeless u-width100pct u-marginVertical20 u-heightAuto" data-action="show-other-responses">Show all responses</button></div></div><div class="responsesStream js-responsesStreamOther"></div></div></div></div><div class="supplementalPostContent js-heroPromo"></div></footer>
   </body>
</html>
"""
selector = Selector(text=body)

title = "title"
subtitle = "subtitle"
author = "author"
author_link = "author_link"
datetime = "datetime"
# tags = ["tag1", "tag2"]
tags = list()
blogtags = selector.xpath('//footer[@class="u-paddingTop10"]//ul[@*]/child::*')
for index, tag in enumerate(blogtags):
    tags.append(tag.xpath("string(.)").extract_first())
blogContentList = list()
tag_value = selector.xpath('//div[@class="section-content"]//div[@class="section-inner sectionLayout--insetColumn"]/child::*')
for index, tag in enumerate(tag_value):
    if tag.xpath("name()").extract_first() == 'figure' and index == 0:
        continue  # 标题
    if tag.xpath("name()").extract_first() == 'figure':
        continue  # 图片
    if tag.xpath("name()").extract_first() == 'div':
        continue  # 作者
    elif tag.xpath("name()").extract_first() == 'p':
        contentType = FieldType.Text
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'h1':
        contentType = FieldType.h1
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'h2':
        contentType = FieldType.h2
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'h3':
        contentType = FieldType.h3
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'h4':
        contentType = FieldType.h4
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'h5':
        contentType = FieldType.h5
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'h6':
        contentType = FieldType.h6
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'pre':
        contentType = FieldType.pre
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'blockquote':
        contentType = FieldType.blockquote
        contentValue = tag.xpath("string(.)").extract_first()
    elif tag.xpath("name()").extract_first() == 'ul':
        contentType = FieldType.ul
        contentValue = tag.xpath("string(.)").extract_first()
    else:
        print(index, tag.extract())
        raise Exception('Unknow tag : {}'.format(tag.extract()))
    content = BlogContent(contentType, contentValue.replace(u'\xa0', u' '))
    blogContentList.append(content)

blogPost = BlogPost(title, subtitle, datetime, author, tags, 'crawler', author_link, blogContentList)

schema = BlogPostSchema()
result = schema.dump(blogPost)
print(str(result.data).replace(u'"', u'\\\"').replace(u"'", u'"'))